<?xml version="1.0"?>
<launch>
  <!-- 
  This launch file starts the explore_lite node for autonomous exploration.
  It is designed to be launched *after* your main navigation.launch file,
  which should already bring up:
  - Gazebo (robot and world)
  - robot_state_publisher
  - gmapping (publishing /map)
  - move_base (named 'navigation' in your setup)
  -->

  <node pkg="explore_lite" type="explore" respawn="false" name="explore_node" output="screen">

    <!-- Frame IDs that explore_lite needs to know about -->
    <param name="robot_base_frame" value="base_link"/>
    <param name="odom_frame" value="odom"/>
    <param name="map_frame" value="map"/>

    <!-- Topics explore_lite subscribes to for map and costmap information -->
    <!-- It uses the global costmap's output to find frontiers -->
    <!-- CORRECTED: Using 'navigation' as the move_base node name -->
    <param name="costmap_topic" value="navigation/global_costmap/costmap"/>
    <param name="costmap_updates_topic" value="navigation/global_costmap/costmap_updates"/>
    <!-- No direct laser topic param, as it gets obstacle info from costmap -->

    <!-- Planning and behavior parameters -->
    <param name="planner_frequency" value="1.0"/> <!-- How often explore_lite re-plans -->
    <param name="progress_timeout" value="30.0"/> <!-- Time (s) without progress before re-evaluating -->
    <param name="visualize" value="true"/> <!-- Set to true to visualize frontiers in RViz -->
    <param name="progress_scale" value="1.0"/> <!-- Factor for progress calculation -->
    <param name="orientation_scale" value="0.0"/> <!-- Factor for orientation gain -->
    <param name="gain_scale" value="1.0"/> <!-- Factor for information gain -->
    <param name="min_frontier_size" value="0.1"/> <!-- Minimum size of a frontier to be considered -->

    <!-- Recovery behaviors for explore_lite (if it gets stuck) -->
    <param name="recovery_timeout" value="15.0"/>
    <param name="recovery_angle_increment" value="0.1"/>

    <!-- Topic to publish goals to move_base -->
    <!-- CORRECTED: Remapping to 'navigation/goal' -->
    <!-- <remap from="move_base/goal" to="navigation/goal"/>  -->
    <remap from="explore_node/move_base" to="navigation"/> 

  </node>

</launch>
